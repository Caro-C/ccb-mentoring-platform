<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="To improve my website for you, I have set up Google Analytics. But for tracking I need your consent and for that I need a cookie banner. Here you can read how I have implemented this. ">
  <title>Implement a cookie banner without WordPress</title>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-53XZFM5');</script>
  <!-- End Google Tag Manager -->

  <!-- stylesheet from font awesome -->
  <link rel="stylesheet" href="../../css/all.css">

  <!-- include google fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Herr+Von+Muellerhoff&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Caveat&display=swap" rel="stylesheet">

  <!-- custom style -->
  <link rel="stylesheet" href="../../css/style.css">

  <!-- include favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="../../assets/favi-180-1.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../assets/favi-32-1.png">
  <link rel="shortcut icon" type="image/png" sizes="16x16" href="../../assets/favi.ico">

  <!-- include Cookieconsent by osano (open source on github) -->
  <link rel="stylesheet" type="text/css" href="../../css/cookieconsent.min.css" />
  <script src="../../js/cookieconsent.min.js"></script>
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
      "popup": { "background": "#f2f4f7"},
      "button": { "background": "#DAA520"}
      },
      "theme": "classic",
      "position": "top",
      "static": "true",
      "type": "opt-in",
      "content": {
      "message": "To make this website as interesting as possible for you, cookies and Google Analytics are used. Do you agree with this? (You can change your decision at any time).",
      "deny":"Decline",
      "allow": "Ok, sure!",
      "link": "Privacy Policy",
      "href": "https://coffeecodebreak.de/html/privacy-policy.html"
      }
    })
  });
  </script>

</head>

<body>

  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-53XZFM5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- Navigation -->
 <section>
  <nav class="nav-bar">
    <div class="nav-menue flex-row">
      <div class="nav-brand">
        <a href="../index-en.html" class="text-gray"  style="color:#DAA520;">CoffeeCodeBreak</a> <!-- href="#"scrolls to top -->
      </div>
      <div>
        <div class="toggle-collapse">
          <div class="toggle-icon">
            <i class="fas fa-bars"></i>
          </div>
        </div>
      </div>
      <div>
        <ul class="nav-items">
          <li class="nav-link home">
            <a href="../index-en.html">Home</a>
          </li>
          <li class="nav-link page-gold">
            <a href="../reads-en.html">Tech-Reads</a>
          </li>
          <li class="nav-link">
            <a href="../inspiration-en.html">Inspiration</a>
          </li>
          <li class="nav-link">
            <a href="../career-en.html">Career</a>
          </li>
          <li class="nav-link">
            <a href="../about-en.html">About</a>
          </li>
        </ul>
      </div>
      <div class="social">
        <div class="dropdown">
            <button class="dropbtn">Language &nbsp &nbsp</button>
            <div class="dropdown-content">
              <a href="../reads/die-lösung-für-mein-cookie-problem.html">German</a>
              <a href="#">English</a>
            </div>
          </div>

        <a href="https://github.com/Caro-C" target="_blank" data-title="Github"><i class="fab fa-github"></i></a>&nbsp &nbsp
        <a href="https://www.linkedin.com/in/carolyn-covic-a22461ba/" target="_blank" data-title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </div>

  </nav>
  </section>

  <!-- End of Navigation -->

  <!-- Start of Main Site Section -->
  <main>
    <!-- Start of Site Title -->
    <section class="site-title page-title single-title">
      <div>
        <div class="logo"><a href='../index-en.html'>CoffeeCodeBreak</a></div>
        <div class="date">Tech blog to inspire</div>
      </div>
    </section>
    <!-- End of Site Title -->

    <!-- Start of Site Content -->
    <section class="container">
      <div class="single-content">
          <div class="single-blog-post">
              <div class="single-post-header">
                <h1 class="h1-for-post"><a href="#">Google Analytics and how I got my cookie banner</a></h1><br>
                <div class="date">June 2020</div>
              </div>
              <div class="level-and-breadcrumb">
              <div class="level level-single-post">Level &nbsp &nbsp<div class="circle" style="background-color:#DAA520;"></div> <div class="circle" style="background-color:#DAA520;"></div> <div class="circle"></div>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</div>
              <div class="breadcrumb breadcrumb-single-post">
                <a href="../index-en.html" class="breadcrumb-hover">Home </a> >
                <a href="../reads-en.html" class="breadcrumb-hover">Reads </a> >
                Google Analytics and how I got my cookie banner
              </div>
            </div>
              <div class="single-post-image">
                <img src="../../assets/cookie8.jpg" alt="Caro with Cookie">
              </div>
              <div class="single-short-text">
                To improve my website for you and to find out which articles are more or less
                popular, I thought it would be a good idea to set up Google Analytics. However, this project turned out to be unexpectedly complex.
                Of course I can't just go around analyzing everything I want. And so I entered the mysterious world of cookies.
              </div>
              <div class="single-post-text">
                In this post I will tell you how I got my beautiful cookie banner and how your cookie decision makes sure that Google Analytics gets started or not.
                Have fun with it! :)<br><br>

                <h2 class="h2-for-post">Why it is not done with Google Analytics</h2>

                Google Analytics is a pretty powerful analysis tool from Google that allows you to track and analyze the traffic on your websites. I thought 'great, so I can see if my blog posts are read and which ones are more or less popular'. Therefore I decided to set up Google Analytics. And the setup itself is really no problem. There are more than enough good instructions and tutorials online.<br><br>

                But unfortunately this is not enough. Without your consent, I can't evaluate what you've been doing on my website. Especially in Germany there is a lot to consider concerning data protection. And not only if you use Google Analytics, but generally if you run a website.<br><br>

                Since my site is brand new and did not even exist for search engines (and thus most likely for you) until a few days ago, I hadn't given much thought to these topics until now. But at some point everyone has to make sure to be on the safe side. And setting up Google Analytics was a (compelling) trigger for me to get started.<br><br>

                So I was facing two challenges: on the one hand, I had to find out what I actually needed and on the other hand, I had to find a technical solution for it. Of course I am not a lawyer and if you need detailed information, you should always consult an expert. This is definitely not an article about all the legal aspects you have to consider when running a website. There are far too many different cases and types of websites for that.<br><br>

                But what is sure: to evaluate your behaviour on my website with Google Analytics I need your permission. I need to get this permission when you open my website in your browser. This is done via a cookie banner. Of course I also have to give you the possibility to reject the tracking.<br><br>

                Naively, I had assumed that this was something that could be done in two hours. And especially concerning the technical side, I had expected - as for almost everything else - quick and easy solutions and enough tutorials. But in the end I had to tediously collect the individual pieces. Therefore I would like to share with you what was my solution to the problem in the end. This is certainly not the only solution, but one that worked out great for me. What exactly you need for your website depends on your situation.<br><br>

                Briefly about my situation: I programmed my site myself and did not use a content management system like WordPress or other templates. This is because I use my website for programming practice and to try out technologies. If you manage your website using WordPress etc., there are of course plugins that make the topic of cookies much easier. But in my case I had to find a solution for my raw code.<br><br>

                <h2 class="h2-for-post">My Cookie-Plan</h2>

                After countless articles, instructions and YouTube videos, I had finally created a plan:
                <ol>
                <li>Implement cookie banner
                <li>Set up Google Analytics
                <li>Set up Google Tag Manager (and integrate Google Analytics as a tag)
                <li>Connect cookie banner with Google Tag Manager
                <li>Test if it works
                </ol>

                In the rest of this post you will find my key-findings for the individual points. Since the topic cookie banner was the most complex for me (but actually it's quite easy once you know what you have to do), I'll go into it in more detail. Concerning the other points I will tell you what helped me for my overall understanding. I also wrote down the things that I don't want to forget and that I would have to collect again next time. For everything else you can easily find more information and details on the internet. Of course you can also write me any time if you have questions.<br><br>

                Let's get started! :)<br><br>

                <h2 class="h2-for-post">1. Implement cookie banner</h2>

                You probably know them - the cookie banners that are displayed on almost every website you visit.<br>
                There are many different types of cookie banners. Some simply inform you that you agree to the use of cookies if you continue to stay on this site.  This variant is not really fair and also not entirely legal - at least in Germany.<br>
                You must be able to decide for yourself whether you want to allow cookies or not. And the best way to do this is to ensure that the rejection of cookies is not hidden somewhere. It should be offered as an equivalent option to allowing cookies, so that you can actively decide whether or not to allow cookies. (And this without 'allow cookies' being pre-selected as it is the case with many pages). This option is called 'Opt-In'. Since the legal situation can change and, as I said, I am not a lawyer, always inform yourself about the current regulations.<br><br>

                For example, if you look at my cookie banner, it offers you the two options 'Decline' and 'Okay, sure!' right at first glance. You have to actively choose one of the two options. You can also access the banner again any time and change your decision. For this purpose I have placed a small light grey 'Cookie Options' button in the upper left corner above my logo. If you click on it, the banner will reappear.<br><br>

                <em>A small digression: Cookies store data in your browser. For example, if you are in an online shop and add items to your shopping cart, cookies can be used to store the items. Cookies can also be used for tracking. For example, they can store information about how long you have been on which pages, which terms you have searched for, etc. Of course, this always triggers broad discussions on data protection and new judgements.</em><br><br>

                Since I didn't want to write all the cookie code myself, I looked for free solutions that I could integrate into my code. There are a few options - but most of them do not offer any visual configuration options for the cookie banner or only as a paid upgrade. Furthermore, the actual code is usually located on their servers, which is controversial from a data protection point of view.<br><br>

                After some searching I found a very popular open source solution which is based on Github:
                <a href="https://github.com/osano/cookieconsent" target="_blank" class="blog-links">CookieConsent by Osano</a>.
                On the
                <a href="https://www.osano.com/cookieconsent/download/" target="_blank" class="blog-links">Osano Website</a> there is even a configurator for your cookie banner, which generates the desired code for you. This code you then insert into your HTML files. This way you do not have to play around with the CookieConsent code.  (The configurator opens when you click on 'Start Coding'.) Select the 'Ask users to opt INTO cookies' option under 'Compliance Type' to create an opt-in banner.<br><br>

                The CookieContent code can be integrated into your own code in a number of ways, as described on Github. The Osano configurator offers you a CSS link under 'Copy the Code', which you can include in the head of your HTML files. Since I wanted the code to be with my other files, I copied the required JavaScript and CSS code and put it as separate files in my folder structure. Here you can find the
                <a href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" target="_blank" class="blog-links">min.js</a> and the <a href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" target="_blank" class="blog-links">min.css</a> code.<br>
                Instead of using the CSS link from Osano you have to specify the folder path to the files. Together with the rest of the code from the configurator, the whole thing looks like this in my case (I put everything I need for my cookie banner in one piece in the head of my HTML files)<br><br>

                <div class="single-post-image">
                  <img src="../../assets/cookieconsent.PNG" alt="Code for Cookie-Consent">
                </div><br>

                By the way: in the min.css file you will find the styling for the <em>revoke-button</em> (the class is called 'cc-revoke'). This is the light-gray button above my logo in the upper left corner. You can use it to reopen the cookie banner. If you know a little bit about CSS, you can customize it in min.css.<br><br>

                <h2 class="h2-for-post">2. Set up Google Analytics</h2>

                After I had finally managed to integrate a cookie banner into my website, I had to make sure that it would work. The whole bunch of work had begun with the fact that I wanted to use Google Analytics. So the next step was to set up Google Analytics.<br><br>
                As I mentioned above, this is quite simple. Roughly speaking: you go to analytics.google.com, log in via your Google account (or create a new one if you don't have one yet), create an analytics account and a new 'property' for your website. There are really great YouTube tutorials with lots of useful tips and hints.<br><br>

                Google Analytics offers you a tracking code that you can embed in your HTML files. An important hint: if you do so, you have to do an IP-anonymization by including an <em>anonymizeIp</em> in the code! There are also many instructions for this.<br>
                If you use the Google Tag Manager, you do not need to use the tracking code directly. Since I didn't want to include the tracking code from Google Analytics in my code, but use the Tag Manager instead, I was done with creating my website as a property here for now.<br><br>

                <h2 class="h2-for-post">3. Set up Google Tag Manager</h2>

                Now I had a cookie banner and my website as a property in Google Analytics. But this alone wouldn't help me much to activate Google Analytics based on the decision of my visitors. So I had to somehow manage to tell Google Analytics to get started or not. Depending on whether you clicked 'Reject' or 'Okay, sure!' on my cookie banner.<br><br>

                During my research I found out that the Google Tag Manager offers a quite comfortable solution for this. The Google Tag Manager is a kind of 'mediator'. It can control for my website whether certain tags, such as Google Analytics, should be activated or not. That sounded quite reasonable to me. Therefore I set up the Google Tag Manager in the next step. Again, you can find really good material for this online.<br><br>

                All in all I created an account with a container for my website and put my Google Analytics tag into this container. Don't forget to put the code that the Google Tag Manager generates for your container into the body of your HTML files. This is how you connect the Tag Manager to your website.<br><br>

                <div class="single-post-image">
                  <img src="../../assets/gtm-integration.png" alt="Google Tag Manager Code in HTML">
                </div><br>

                Since I didn't use the Google Analytics tracking code to make the anonymization of your IP address, I had to do this here. To do this, you create a variable in the Tag Manager for which you enter the tracking ID of the website (you can find it at Google Analytics). Then you choose 'anonymizeIp' as a field name and set the value to 'true'. Should look something like this:<br><br>

                <div class="single-post-image">
                  <img src="../../assets/googletagmanager1.png" alt="anonymizeIp in Google Tag Manager">
                </div><br>

                This means that when Google Analytics tracks what you did on my website, the last eight digits of your IP address are encrypted. So it is no longer possible to track which computer exactly was on my site and that's absolutely fine. In my Google Analytics dashboard I can see for example that yesterday five people (or more precisely devices) from the Munich area were on my website and which blog posts they had opened for how long.<br><br>

                Now I was almost there. The only thing missing was the connection between my cookie banner and the Google Tag Manager. And how I made this, I will explain in the next section.<br><br>

                 <h2 class="h2-for-post">4. Connect cookie banner with Google Tag Manager</h2>

                If you click on 'Reject' or 'Okay, sure!' in my cookie banner, the CookieConsent code snippet that checks how you decided ('cookieconsent_status') will set the status to <em>allow</em> or <em>deny</em>. And exactly this information is needed by my Google Tag Manager to tell Google Analytics that it may or may not start.<br><br>

                In order for the Google Tag Manager to receive and process the necessary information, I have created a variable of the type <em>First-Party-Cookie</em> for my CoffeeCodeBreak container and stored the name of the 'verification code snippet' (i.e. 'cookieconsent_status') in it.<br><br>

                <div class="single-post-image">
                  <img src="../../assets/googletagmanager2.png" alt="Variable configuration in Google Tag Manager">
                </div><br>

                To make sure that my Google Tag Manager only allows tracking if the status is 'allow', I created a trigger in the Tag Manager. I gave this trigger the type 'page view' and specified that Google Analytics may only be triggered if my CookieContent variable contains the value 'allow'. Here is a picture of the configuration:<br><br>

                <div class="single-post-image">
                  <img src="../../assets/googletagmanager3.png" alt="Trigger configuration in Google Tag Manager">
                </div><br>

                And that was it! If you go to my site now and click 'Reject' in my cookie banner, my Google Tag Manager will receive the information that Google Analytics must not be activated. If you click 'Okay, sure!', the tag manager will receive the information that you allow tracking and Google Analytics will be started.<br>
                And that in turn helps me to see which items were clicked on how often, how much time was spent on each item, etc. This means I can write more articles that might be interesting for you and less that you might not like so much. And of course I'm really happy when I see that someone has visited my website! :)<br><br>

                <h2 class="h2-for-post">5. Test if it works</h2>

                To make sure that my settings work, I tested the whole thing. The Google Tag Manager offers a preview option. If you open your page in preview mode, you can see directly which tags are active and which are not. I alternately rejected and re-enabled my cookies and clicked around on the page to check if Google Analytics was active or inactive whenever I wanted it to be. And fortunately this worked perfectly well! :)<br><br>

                Maybe you are in a similar situation and I could help you a little bit with this post. And if not, I hope that you - even if it was quite specific and not easy this time - understood the most important things and learned something new!<br><br>

                See you soon!<br><br>

                Caro


              </div>
              <div class="breadcrumb">
                <a href="../reads-en.html" class="breadcrumb-hover"><u>back to Reads</u></a> >
              </div><br>

              <div class="comments">
                <h2 class="h2-for-post">Leave a comment</h2>
                Feel free to leave me a comment. Your e-mail address will not be published. The fields marked with a * have to be filled out to send the comment. It may take a few hours until your comment is published.<br><br>
                <form action="mailto:coffeecodebreak@gmail.com" method="post" enctype="text/plain">
                  Comment<br> <textarea name="Comment" rows="10" cols="40"></textarea><br><br>
                  Name* (as shown after publishing)<br> <input name="Name" size="40"><br>
                  Email*<br> <input name="Email" size="40"><br>
                  Website<br> <input name="Website" size="40"><br><br>

                  <input type="submit" value="Submit">
                  <input type="reset" value="Cancel">

                </form>
              </div>

            </div>


        <!-- Start of Side-Bar -->
        <aside class="side-bar side-bar-posts page-side-bar">
            <div class="side-bar-post-x">
              <div id="about-me">About me </div>
              <div id="intro">Hi, I am Caro and I am writing about my way into software development.<br>
                 I want to share my experience and open the door to this world for you.
                 My goal is to inspire you with little tech stories and to make you curious.<br>
                 Get yourself a coffee and enrich your break with a little bit of new knowledge :)<br>
                 <span class="read-more"><a href="../about-en.html">> Read more</a></span>
              </div>
              <div class="profile-pic">
                <img src="../../assets/profile.jpg" id="profile-pic" alt="profile picture">
              </div>

              <div class="sidebar-contact">
                Do you have any questions or feedback?<br>
                I'll be happy to hear from you!<br>
                <a href="mailto: coffeecodebreak@gmail.com" class="email"><i class="far fa-envelope"></i></a>&nbsp &nbsp
                <a href="https://www.linkedin.com/in/carolyn-covic-a22461ba/" target="_blank" class="email"><i class="fab fa-linkedin-in"></i></a>
              </div>

            </div>

            <div class="side-bar-post-x">
              <div id="favorite-posts">Favorite Posts </div>

              <hr><br>
              <div class="side-bar-collection">
                <a href="../reads-en/get-a-website-to-the-internet.html"><img src="../../assets/internet8.jpg" class="side-bar-img" alt="Website on Phone"></a><br>
                <i class="far fa-bookmark"></i>&nbsp
                <a href="../reads-en/get-a-website-to-the-internet.html" class="side-bar-topic">How to get a website on the internet?</a>
              </div><br>

              <div class="side-bar-collection">
                <a href="../reads-en/how-to-build-a-website.html"><img src="../../assets/blog8.jpg" class="side-bar-img" alt="Coding woman"></a><br>
                <i class="far fa-bookmark"></i>&nbsp
                <a href="../reads-en/how-to-build-a-website.html" class="side-bar-topic">How I built this blog</a>
              </div><br>

            </div>
        </aside>
        <!-- End of Side-Bar -->

      </div>
    </section>
    <!-- End of Site Content -->

  </main>
  <!-- End of Main Site Section -->

  <!-- Start of Footer -->
  <br><br><br>
  <footer class="footer">
    <div class="footer-container">
      <div class="contact">
        <a href="../contact-en.html">Contact</a>
      </div>
      <div class="terms">
        <a href="../terms-and-conditions.html">Terms & Conditions</a>
      </div>
      <div class="privacy">
        <a href="../privacy-policy.html">Privacy Policy</a>
      </div>
      <div class="move-up">
        <span><i class="fas fa-chevron-circle-up"></i></span>
      </div>
    </div>
  </footer>
  <!-- End of Footer -->

  <!-- custom JQuery library file -->
  <script src="../../js/Jquery3.5.0.min.js"></script>
  <!-- owl carousel -->
  <script src="../../js/owl.carousel.min.js"></script>

  <script src="../../js/main.js"></script>
</body>

</html>
